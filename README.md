# 树莓派小车控制项目

这是一个基于树莓派和L298N驱动模块的四轮小车控制项目。

## 硬件要求

- 树莓派（任何型号）
- L298N驱动模块
- 4个舵机（用于控制轮子）
- 电源供应（建议使用12V电源）
- 杜邦线若干
- 小车底盘

## 接线说明

### L298N与树莓派的连接
- IN1 -> GPIO 27
- IN2 -> GPIO 22
- IN3 -> GPIO 23
- IN4 -> GPIO 24
- GND -> GND
- 5V -> 5V（如果需要从树莓派取电）
- 12V -> 12V电源正极（建议使用外部电源）

### 关于ENA和ENB引脚
- 如果L298N模块没有连接ENA和ENB引脚，程序会自动适应这种情况
- 在这种情况下，速度控制是通过软件实现的，而不是通过PWM控制
- 如果连接了ENA和ENB引脚，请将它们连接到树莓派的GPIO引脚（如GPIO 17和GPIO 25），并修改代码中的相应部分

## 安装依赖

```bash
pip install -r requirements.txt
```

## 使用方法

### 本地控制
1. 确保所有硬件正确连接
2. 运行主程序：
```bash
python car_control.py
```

### 远程控制
1. 在小车上运行服务器程序：
```bash
python car_server.py
```
2. 在控制电脑上运行客户端程序（命令行版本）：
```bash
python car_client.py <树莓派IP地址>
```
3. 在控制电脑上运行客户端程序（图形界面版本）：
```bash
python car_client_gui.py <树莓派IP地址>
```

## 控制命令
- 前进：按 'w'
- 后退：按 's'
- 左转：按 'a'
- 右转：按 'd'
- 停止：按 'q'
- 速度控制：按 '1'-'9'（1最慢，9最快）
- 退出：按 'esc'

## 速度控制说明
- 数字键1-9对应不同的速度等级
- 1级：11% 速度
- 2级：22% 速度
- 3级：33% 速度
- 4级：44% 速度
- 5级：55% 速度
- 6级：66% 速度
- 7级：77% 速度
- 8级：88% 速度
- 9级：99% 速度
- 初始速度设置为50%

## 远程控制说明
1. 确保树莓派和控制电脑在同一个网络中
2. 在树莓派上运行服务器程序，它会显示本机IP地址
3. 在控制电脑上运行客户端程序，需要提供树莓派的IP地址
4. 连接成功后，可以使用相同的控制命令远程控制小车
5. 服务器支持多客户端连接，但建议只使用一个客户端进行控制
6. 如果连接断开，客户端会自动提示，需要重新运行客户端程序

## 图形界面客户端功能
1. 连接状态显示
2. 方向控制按钮（上下左右）
3. 速度控制滑块（0-100%）
4. 实时速度显示
5. 控制日志记录
6. 支持键盘控制（WASD）
7. 自动重连机制
8. 心跳检测 